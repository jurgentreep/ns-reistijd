(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"/7QA":function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)},i=this&&this.__read||function(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a},o=this&&this.__spread||function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var u=n("NpuA"),s=a(n("wd/R"));n("OMi8");var c,l=document.querySelector(".csv-form"),f=document.querySelector("input"),m=document.querySelector(".results"),p=document.querySelector(".station-select"),d=document.querySelector(".select-form"),v={journeys:null};if(!l)throw new Error("missing csvFormElement");l.addEventListener("submit",function(e){e.preventDefault(),h().then(y).then(S).then(M).then(b).then(g).then(D).then(console.log).catch(console.error)}),function(e){e[e.Date=0]="Date",e[e.DepartureTime=1]="DepartureTime",e[e.DepartureStation=2]="DepartureStation",e[e.ArrivalTime=3]="ArrivalTime",e[e.ArrivalStation=4]="ArrivalStation",e[e.Spent=5]="Spent",e[e.Earned=6]="Earned",e[e.Transaction=7]="Transaction",e[e.Class=8]="Class",e[e.Product=9]="Product",e[e.Private=10]="Private",e[e.Note=11]="Note"}(c||(c={}));var h=function(){return new Promise(function(e,t){f&&f.files&&f.files.length?u.parse(f.files[0],{complete:function(t){var n=t.data;n.splice(0,1),e(n)}}):t("Invalid input")})},y=function(e){return new Promise(function(t,n){t(e.filter(function(e){return e[c.Date]&&e[c.DepartureTime]&&e[c.ArrivalTime]}))})},w=function(e,t){return s.default(e+" "+t,"DD-MM-YYYY HH:mm")},S=function(e){return new Promise(function(t,n){t(e.map(function(e){var t=w(e[c.Date],e[c.DepartureTime]),n=w(e[c.Date],e[c.ArrivalTime]);return n.isBefore(t)&&n.add(1,"days"),{departure:t,arrival:n,difference:0,departureStation:e[c.DepartureStation],arrivalStation:e[c.ArrivalStation]}}))})},b=function(e){return new Promise(function(t,n){t(e.map(function(e){var t=e.arrival,n=e.departure;return r({},e,{difference:t.diff(n,"minutes")})}))})},g=function(e){return new Promise(function(t,n){v.journeys=e,t(e)})},D=function(e){return new Promise(function(t,n){var r=e.map(function(e){return e.difference}),i=r.reduce(function(e,t){return e+t}),a=i/e.length,u=Math.max.apply(Math,o(r)),s=Math.min.apply(Math,o(r));m?m.innerHTML="\n      totalMinutes: "+i+"<br>\n      averageMinutes: "+a+"<br>\n      maxMinutes: "+u+"<br>\n      minMinutes: "+s+"<br>\n      journeys: "+e.length+"<br>\n      <br>\n      All data displayed is from the last 18 months\n    ":n("missing resultsElement"),t(e)})},M=function(e){return new Promise(function(t,n){var r=e.map(function(e){return e.arrivalStation}),i=e.map(function(e){return e.departureStation}),a=r.concat(i);if(a=o(new Set(a)),!p)throw new Error("missing stationSelectElement");p.innerHTML=a.map(function(e){return'<option value="'+e+'">'+e+"</option>"}).join(),t(e)})};if(!d)throw new Error("missing selectFormElement");d.addEventListener("submit",function(e){if(e.preventDefault(),!p)throw new Error("missing stationSelectElement");var t=p.selectedOptions,n=Array.from(t).map(function(e){return e.value});if(!v.journeys)throw new Error("missing state.journeys");var r=v.journeys.filter(function(e){return n.includes(e.arrivalStation)&&n.includes(e.departureStation)});D(r)})},J6RI:function(e,t,n){(e.exports=n("JPst")(!1)).push([e.i,".mb-1 {\n  margin-bottom: 1rem;\n}",""])},OMi8:function(e,t,n){var r=n("J6RI");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(e.exports=r.locals)}},[["/7QA",1,2]]]);